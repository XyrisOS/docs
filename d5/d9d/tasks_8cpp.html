<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xyris: tasks.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xyris
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d5/d9d/tasks_8cpp.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tasks.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="../../d7/d9c/_arch_8hpp_source.html">arch/Arch.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d9/d4f/_memory_8hpp_source.html">arch/Memory.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/dbd/tasks_8hpp_source.html">sys/tasks.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/d64/_panic_8hpp_source.html">sys/Panic.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../da/d45/heap_8hpp_source.html">mem/heap.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/daf/stdio_8hpp_source.html">lib/stdio.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../db/d90/rs232_8hpp_source.html">dev/serial/rs232.hpp</a>&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;x86gprintrin.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../df/d05/timer_8hpp_source.html">arch/i386/timer.hpp</a>&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for tasks.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../da/d98/tasks_8cpp__incl.png" border="0" usemap="#tasks_8cpp" alt=""/></div>
<map name="tasks_8cpp" id="tasks_8cpp">
<area shape="rect" title=" " alt="" coords="799,5,883,32"/>
<area shape="rect" href="../../d7/d9c/_arch_8hpp.html" title="Architecture control and initialization." alt="" coords="111,304,222,331"/>
<area shape="rect" title=" " alt="" coords="922,453,993,480"/>
<area shape="rect" href="../../d9/d4f/_memory_8hpp.html" title="Architecture memory management &amp; paging API." alt="" coords="515,379,650,405"/>
<area shape="rect" href="../../d2/dbd/tasks_8hpp.html" title=" " alt="" coords="603,80,714,107"/>
<area shape="rect" href="../../d6/d64/_panic_8hpp.html" title="Kernel panic management." alt="" coords="202,229,313,256"/>
<area shape="rect" href="../../da/d45/heap_8hpp.html" title="Liballoc heap implementation." alt="" coords="5,155,125,181"/>
<area shape="rect" href="../../d2/daf/stdio_8hpp.html" title=" " alt="" coords="1014,80,1117,107"/>
<area shape="rect" href="../../db/d90/rs232_8hpp.html" title="A simple, write&#45;only driver for the RS232 serial device standard. Code mostly ported from Panix&#45;Archi..." alt="" coords="831,80,985,107"/>
<area shape="rect" title=" " alt="" coords="1473,80,1586,107"/>
<area shape="rect" href="../../df/d05/timer_8hpp.html" title=" " alt="" coords="1082,229,1230,256"/>
<area shape="rect" href="../../d2/d3d/compiler_8hpp.html" title="Compiler meta directives." alt="" coords="195,379,339,405"/>
<area shape="rect" title=" " alt="" coords="389,453,464,480"/>
<area shape="rect" href="../../d1/d75/paging_8hpp.html" title=" " alt="" coords="581,155,713,181"/>
<area shape="rect" href="../../d6/dc1/_memory_map_8hpp.html" title="Memory map containing a number of Memory sections that describe the physical memory layout." alt="" coords="388,229,559,256"/>
<area shape="rect" href="../../d0/d91/_memory_section_8hpp.html" title=" " alt="" coords="367,304,558,331"/>
<area shape="rect" title=" " alt="" coords="1044,155,1119,181"/>
<area shape="rect" href="../../dd/de9/_arch_8i386_8hpp.html" title="i386 architecture implementation of Arch.hpp" alt="" coords="1057,304,1231,331"/>
<area shape="rect" href="../../d8/dfb/regs_8hpp.html" title=" " alt="" coords="726,379,869,405"/>
<area shape="rect" href="../../d8/d9f/ports_8hpp.html" title="Ports header file. Provides inline functions for getting and setting values at different ports...." alt="" coords="1045,379,1192,405"/>
<area shape="rect" href="../../d4/ddc/isr_8hpp.html" title="Interrupt Service Routine header." alt="" coords="1217,379,1346,405"/>
</map>
</div>
</div>
<p><a href="../../d5/d9d/tasks_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4c4480fc9163e10c90c54e837778ef8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a4c4480fc9163e10c90c54e837778ef8f">NAMED_TASKLIST</a>(name)</td></tr>
<tr class="separator:a4c4480fc9163e10c90c54e837778ef8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a525bc038ba8fbd7178e3b3d20f866af0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a>(action,  <a class="el" href="../../db/da2/structtask.html">task</a>)</td></tr>
<tr class="separator:a525bc038ba8fbd7178e3b3d20f866af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a28a181f075e53e9f4a57998ca5a2b399"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a28a181f075e53e9f4a57998ca5a2b399">_tasks_enqueue_ready</a> (struct <a class="el" href="../../db/da2/structtask.html">task</a> *<a class="el" href="../../db/da2/structtask.html">task</a>)</td></tr>
<tr class="separator:a28a181f075e53e9f4a57998ca5a2b399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a253cc97fa008fce21eeb67d012a9fced"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a253cc97fa008fce21eeb67d012a9fced">tasks_update_time</a> ()</td></tr>
<tr class="separator:a253cc97fa008fce21eeb67d012a9fced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c709360390e2764996020567dd70dfd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a2c709360390e2764996020567dd70dfd">_wakeup</a> (struct <a class="el" href="../../db/da2/structtask.html">task</a> *<a class="el" href="../../db/da2/structtask.html">task</a>)</td></tr>
<tr class="separator:a2c709360390e2764996020567dd70dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc521df4525212326430e3ee4ff0579a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#afc521df4525212326430e3ee4ff0579a">NAMED_TASKLIST</a> (sleeping)</td></tr>
<tr class="separator:afc521df4525212326430e3ee4ff0579a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b90bb0dc45c7249ca8c08ef2e1f3373"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a0b90bb0dc45c7249ca8c08ef2e1f3373">NAMED_TASKLIST</a> (stopped)</td></tr>
<tr class="separator:a0b90bb0dc45c7249ca8c08ef2e1f3373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bbf88fbecf73800c39fa4a887a506a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a77bbf88fbecf73800c39fa4a887a506a">tasks_init</a> ()</td></tr>
<tr class="separator:a77bbf88fbecf73800c39fa4a887a506a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65c4921579a6bad97c037bc8db69fb26"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/da2/structtask.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a65c4921579a6bad97c037bc8db69fb26">tasks_new</a> (void(*entry)(void), struct <a class="el" href="../../db/da2/structtask.html">task</a> *storage, <a class="el" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2">task_state</a> state, const char *name)</td></tr>
<tr class="separator:a65c4921579a6bad97c037bc8db69fb26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9769e0e26d471f914a8e33bc6494f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a5e9769e0e26d471f914a8e33bc6494f8">tasks_schedule</a> ()</td></tr>
<tr class="separator:a5e9769e0e26d471f914a8e33bc6494f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb605ae845f610f55e83c3ce80750355"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#abb605ae845f610f55e83c3ce80750355">tasks_get_self_time</a> ()</td></tr>
<tr class="separator:abb605ae845f610f55e83c3ce80750355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae954d27107c4990313982108234cae5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#ae954d27107c4990313982108234cae5d">tasks_block_current</a> (<a class="el" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2">task_state</a> reason)</td></tr>
<tr class="separator:ae954d27107c4990313982108234cae5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8fc9f801e5cc9d86d6801f003fd4a24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#ac8fc9f801e5cc9d86d6801f003fd4a24">tasks_unblock</a> (struct <a class="el" href="../../db/da2/structtask.html">task</a> *<a class="el" href="../../db/da2/structtask.html">task</a>)</td></tr>
<tr class="separator:ac8fc9f801e5cc9d86d6801f003fd4a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1280b6050df9305a3afc0b8f609e581c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a1280b6050df9305a3afc0b8f609e581c">tasks_nano_sleep_until</a> (uint64_t time)</td></tr>
<tr class="separator:a1280b6050df9305a3afc0b8f609e581c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0837dfadb366ea8717fd97e04b3374"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#afe0837dfadb366ea8717fd97e04b3374">tasks_nano_sleep</a> (uint64_t time)</td></tr>
<tr class="separator:afe0837dfadb366ea8717fd97e04b3374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4064f154e53a624a5347df60c19dfa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#aaf4064f154e53a624a5347df60c19dfa">tasks_exit</a> ()</td></tr>
<tr class="separator:aaf4064f154e53a624a5347df60c19dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2432c50b4d4264b5d5295bdb4f19e0d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a2432c50b4d4264b5d5295bdb4f19e0d2">tasks_sync_block</a> (struct <a class="el" href="../../dd/dc4/structtask__sync.html">task_sync</a> *ts)</td></tr>
<tr class="separator:a2432c50b4d4264b5d5295bdb4f19e0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95269b08443b913d1ca443794e4aa3ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a95269b08443b913d1ca443794e4aa3ad">tasks_sync_unblock</a> (struct <a class="el" href="../../dd/dc4/structtask__sync.html">task_sync</a> *ts)</td></tr>
<tr class="separator:a95269b08443b913d1ca443794e4aa3ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9f6cf565fea5037efb7f971337abaf12"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/da2/structtask.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a> = NULL</td></tr>
<tr class="separator:a9f6cf565fea5037efb7f971337abaf12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf500ea78dbbde8ed74812647db6740"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d8a/structtasklist.html">tasklist</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/tasks_8cpp.html#abdf500ea78dbbde8ed74812647db6740">tasks_ready</a> = { }</td></tr>
<tr class="separator:abdf500ea78dbbde8ed74812647db6740"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Micah Switzer (<a href="#" onclick="location.href='mai'+'lto:'+'msw'+'it'+'zer'+'@c'+'eda'+'rv'+'ill'+'e.'+'edu'; return false;">mswit<span style="display: none;">.nosp@m.</span>zer@<span style="display: none;">.nosp@m.</span>cedar<span style="display: none;">.nosp@m.</span>vill<span style="display: none;">.nosp@m.</span>e.edu</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.3 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-08-29</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright the Xyris Contributors (c) 2020 </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4c4480fc9163e10c90c54e837778ef8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c4480fc9163e10c90c54e837778ef8f">&#9670;&nbsp;</a></span>NAMED_TASKLIST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NAMED_TASKLIST</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keyword">struct </span><a class="code" href="../../df/d8a/structtasklist.html">tasklist</a> tasks_##name = { <span class="comment">/* Zero */</span> }; \</div>
<div class="line">    static <span class="keyword">inline</span> <span class="keywordtype">void</span> _enqueue_##name(<span class="keyword">struct</span> <a class="code" href="../../db/da2/structtask.html">task</a> *<a class="code" href="../../db/da2/structtask.html">task</a>) { \</div>
<div class="line">        _enqueue_task(&amp;tasks_##name, <a class="code" href="../../db/da2/structtask.html">task</a>); } \</div>
<div class="line">    static <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="../../db/da2/structtask.html">task</a> *_dequeue_##<a class="code" href="../../db/da2/structtask.html#a83a6cca985649416b9cbb05a39b8d3f2">name</a>() { \</div>
<div class="line">        return _dequeue_task(&amp;tasks_##<a class="code" href="../../db/da2/structtask.html#a83a6cca985649416b9cbb05a39b8d3f2">name</a>); }</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00032">32</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>

</div>
</div>
<a id="a525bc038ba8fbd7178e3b3d20f866af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a525bc038ba8fbd7178e3b3d20f866af0">&#9670;&nbsp;</a></span>TASK_ACTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TASK_ACTION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">action, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../db/da2/structtask.html">task</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00123">123</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a28a181f075e53e9f4a57998ca5a2b399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28a181f075e53e9f4a57998ca5a2b399">&#9670;&nbsp;</a></span>_tasks_enqueue_ready()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _tasks_enqueue_ready </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/da2/structtask.html">task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00278">278</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    _enqueue_task(&amp;<a class="code" href="../../d5/d9d/tasks_8cpp.html#abdf500ea78dbbde8ed74812647db6740">tasks_ready</a>, <a class="code" href="../../db/da2/structtask.html">task</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_a28a181f075e53e9f4a57998ca5a2b399_icgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_a28a181f075e53e9f4a57998ca5a2b399_icgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_a28a181f075e53e9f4a57998ca5a2b399_icgraph" id="d5/d9d/tasks_8cpp_a28a181f075e53e9f4a57998ca5a2b399_icgraph">
<area shape="rect" title=" " alt="" coords="132,5,303,32"/>
<area shape="rect" href="../../d5/d9d/tasks_8cpp.html#a2c709360390e2764996020567dd70dfd" title=" " alt="" coords="5,5,84,32"/>
</map>
</div>

</div>
</div>
<a id="a2c709360390e2764996020567dd70dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c709360390e2764996020567dd70dfd">&#9670;&nbsp;</a></span>_wakeup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _wakeup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/da2/structtask.html">task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00439">439</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="../../db/da2/structtask.html">task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a> = <a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2aebcd951a6127c3c50a4f197b2b637793">TASK_READY</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="../../db/da2/structtask.html">task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#ac8757d0d71961fb132be5811ec283976">wakeup_time</a> = (0ULL - 1);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a28a181f075e53e9f4a57998ca5a2b399">_tasks_enqueue_ready</a>(<a class="code" href="../../db/da2/structtask.html">task</a>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a>(<span class="stringliteral">&quot;wakeup&quot;</span>, <a class="code" href="../../db/da2/structtask.html">task</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_a2c709360390e2764996020567dd70dfd_cgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_a2c709360390e2764996020567dd70dfd_cgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_a2c709360390e2764996020567dd70dfd_cgraph" id="d5/d9d/tasks_8cpp_a2c709360390e2764996020567dd70dfd_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,84,32"/>
<area shape="rect" href="../../d5/d9d/tasks_8cpp.html#a28a181f075e53e9f4a57998ca5a2b399" title=" " alt="" coords="132,5,303,32"/>
</map>
</div>

</div>
</div>
<a id="afc521df4525212326430e3ee4ff0579a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc521df4525212326430e3ee4ff0579a">&#9670;&nbsp;</a></span>NAMED_TASKLIST() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NAMED_TASKLIST </td>
          <td>(</td>
          <td class="paramtype">sleeping&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b90bb0dc45c7249ca8c08ef2e1f3373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b90bb0dc45c7249ca8c08ef2e1f3373">&#9670;&nbsp;</a></span>NAMED_TASKLIST() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NAMED_TASKLIST </td>
          <td>(</td>
          <td class="paramtype">stopped&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae954d27107c4990313982108234cae5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae954d27107c4990313982108234cae5d">&#9670;&nbsp;</a></span>tasks_block_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_block_current </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2">task_state</a>&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks the current task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reason</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00421">421</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    _aquire_scheduler_lock();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a> = reason;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a>(<span class="stringliteral">&quot;block&quot;</span>, <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    _schedule();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    _release_scheduler_lock();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf4064f154e53a624a5347df60c19dfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf4064f154e53a624a5347df60c19dfa">&#9670;&nbsp;</a></span>tasks_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exits the current task. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00510">510</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// userspace cleanup can happen here</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="../../d7/d75/namespace_r_s232.html#a394b7ac1c601a47c2881a460eb41171a">RS232::printf</a>(<span class="stringliteral">&quot;task \&quot;%s\&quot; (0x%08lx) exiting\n&quot;</span>, <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a83a6cca985649416b9cbb05a39b8d3f2">name</a>, (uint32_t)<a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    _aquire_scheduler_lock();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// all scheduling-specific operations must happen here</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    _enqueue_stopped(<a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// the ordering of these two should really be reversed</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// but the scheduler currently isn&#39;t very smart</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#ae954d27107c4990313982108234cae5d">tasks_block_current</a>(<a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a52340c1844b9c87b6c965569f21d72f1">TASK_STOPPED</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#ac8fc9f801e5cc9d86d6801f003fd4a24">tasks_unblock</a>(&amp;_cleaner_task);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    _release_scheduler_lock();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_aaf4064f154e53a624a5347df60c19dfa_cgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_aaf4064f154e53a624a5347df60c19dfa_cgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_aaf4064f154e53a624a5347df60c19dfa_cgraph" id="d5/d9d/tasks_8cpp_aaf4064f154e53a624a5347df60c19dfa_cgraph">
<area shape="rect" title="Exits the current task." alt="" coords="5,5,95,32"/>
<area shape="rect" href="../../d7/d75/namespace_r_s232.html#a394b7ac1c601a47c2881a460eb41171a" title=" " alt="" coords="143,5,249,32"/>
<area shape="rect" href="../../d7/d75/namespace_r_s232.html#a04a4582da3c891beaa849f3ce2189975" title=" " alt="" coords="297,5,412,32"/>
<area shape="rect" href="../../d4/d64/printf_8cpp.html#a85a2fff114bf015eba22a1dc163bf1ba" title="Perform all printf operations on the format string using the provided argument list and uses the call..." alt="" coords="460,5,565,32"/>
<area shape="rect" href="../../d5/d24/string_8cpp.html#a2dee044e4e667b5b789b493abd21cfa4" title="Returns the length of a string." alt="" coords="613,5,672,32"/>
</map>
</div>

</div>
</div>
<a id="abb605ae845f610f55e83c3ce80750355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb605ae845f610f55e83c3ce80750355">&#9670;&nbsp;</a></span>tasks_get_self_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t tasks_get_self_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the lifetime of the current task (in nanoseconds). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t Task lifetime (in nanoseconds) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00415">415</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a253cc97fa008fce21eeb67d012a9fced">tasks_update_time</a>();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a186feb125b22218d54494eef4d86a3b8">time_used</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_abb605ae845f610f55e83c3ce80750355_cgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_abb605ae845f610f55e83c3ce80750355_cgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_abb605ae845f610f55e83c3ce80750355_cgraph" id="d5/d9d/tasks_8cpp_abb605ae845f610f55e83c3ce80750355_cgraph">
<area shape="rect" title="Returns the lifetime of the current task (in nanoseconds)." alt="" coords="5,5,159,32"/>
<area shape="rect" href="../../d5/d9d/tasks_8cpp.html#a253cc97fa008fce21eeb67d012a9fced" title=" " alt="" coords="207,5,353,32"/>
</map>
</div>

</div>
</div>
<a id="a77bbf88fbecf73800c39fa4a887a506a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77bbf88fbecf73800c39fa4a887a506a">&#9670;&nbsp;</a></span>tasks_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the kernel task manager. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00150">150</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// get a pointer to the first task&#39;s tcb</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/da2/structtask.html">task</a> *this_task = &amp;_first_task;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// discover the CPU speed for accurate scheduling</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    _discover_cpu_speed();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    *this_task = {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">// this will be filled in when we switch to another task for the first time</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        .<a class="code" href="../../db/da2/structtask.html#ac52da3250648a75f90719ffd5d3f3535">stack_top</a> = 0,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">// this will be the same for kernel tasks</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        .page_dir = <a class="code" href="../../db/d2f/namespace_memory.html#a5c89c1a5d8f8de115f48adac4772f579">Memory::getPageDirPhysAddr</a>(),</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">// this is a linked list with only this task</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        .next = NULL,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment">// this task is currently running</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        .state = <a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a9bd2895158d9e7c8cf80b57659fcba50">TASK_RUNNING</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">// just say that this task hasn&#39;t spent any time running yet</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        .time_used = 0,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="comment">// Set wakeup time to 0 to make compiler happy</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        .wakeup_time = 0,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// name</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        .name = <span class="stringliteral">&quot;[main]&quot;</span>,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">// this is not backed by dynamic memory</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        .alloc = <a class="code" href="../../d2/dbd/tasks_8hpp.html#ac7aaa4c0605984fc6b92a727881b8707a8d8e53f91997090c4b163b7579f366dd">ALLOC_STATIC</a>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    };</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a>(<span class="stringliteral">&quot;create task&quot;</span>, this_task);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// create a task for the cleaner and set it&#39;s state to &quot;paused&quot;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    (void) <a class="code" href="../../d5/d9d/tasks_8cpp.html#a65c4921579a6bad97c037bc8db69fb26">tasks_new</a>(_cleaner_task_impl, &amp;_cleaner_task, <a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a70c1246153ef112b1baa60e2f6e36cd3">TASK_PAUSED</a>, <span class="stringliteral">&quot;[cleaner]&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    _cleaner_task.<a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a> = <a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a70c1246153ef112b1baa60e2f6e36cd3">TASK_PAUSED</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// update the timer variables</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    _last_time = _get_cpu_time_ns();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    _last_timer_time = _last_time;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// enable time slices</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    _time_slice_remaining = <a class="code" href="../../d2/dbd/tasks_8hpp.html#ab3c4cf018b280f12e3726184a945728c">TIME_SLICE_SIZE</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// this is the current task</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a> = this_task;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="../../dc/de5/timer_8cpp.html#aa5729176ed3fb89f2e5c91b28361f643">timer_register_callback</a>(_on_timer);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afe0837dfadb366ea8717fd97e04b3374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0837dfadb366ea8717fd97e04b3374">&#9670;&nbsp;</a></span>tasks_nano_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_nano_sleep </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleep for a given period of time (in nanoseconds). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>Nanoseconds to sleep </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00505">505</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a1280b6050df9305a3afc0b8f609e581c">tasks_nano_sleep_until</a>(_get_cpu_time_ns() + time);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_cgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_cgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_cgraph" id="d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_cgraph">
<area shape="rect" title="Sleep for a given period of time (in nanoseconds)." alt="" coords="5,5,144,32"/>
<area shape="rect" href="../../d5/d9d/tasks_8cpp.html#a1280b6050df9305a3afc0b8f609e581c" title="Sleeps until the provided absolute time (in nanoseconds)." alt="" coords="192,5,367,32"/>
</map>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_icgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_icgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_icgraph" id="d5/d9d/tasks_8cpp_afe0837dfadb366ea8717fd97e04b3374_icgraph">
<area shape="rect" title="Sleep for a given period of time (in nanoseconds)." alt="" coords="201,5,340,32"/>
<area shape="rect" href="../../dc/da3/namespace_apps.html#aebbc688ed6a7097af1dd858ca0559d4b" title="Starts a task to display number of primes found by find_primes." alt="" coords="5,5,153,32"/>
</map>
</div>

</div>
</div>
<a id="a1280b6050df9305a3afc0b8f609e581c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1280b6050df9305a3afc0b8f609e581c">&#9670;&nbsp;</a></span>tasks_nano_sleep_until()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_nano_sleep_until </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleeps until the provided absolute time (in nanoseconds). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>Absolute time to sleep until (in nanoseconds since boot) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00493">493</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// TODO: maybe validate that this time is in the future?</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    _aquire_scheduler_lock();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a> = <a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2ac261e4c62bea6a313e386d777ae7ecbb">TASK_SLEEPING</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#ac8757d0d71961fb132be5811ec283976">wakeup_time</a> = time;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    _enqueue_sleeping(<a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a>(<span class="stringliteral">&quot;sleep&quot;</span>, <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    _schedule();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    _release_scheduler_lock();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_a1280b6050df9305a3afc0b8f609e581c_icgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_a1280b6050df9305a3afc0b8f609e581c_icgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_a1280b6050df9305a3afc0b8f609e581c_icgraph" id="d5/d9d/tasks_8cpp_a1280b6050df9305a3afc0b8f609e581c_icgraph">
<area shape="rect" title="Sleeps until the provided absolute time (in nanoseconds)." alt="" coords="388,5,563,32"/>
<area shape="rect" href="../../d2/dbd/tasks_8hpp.html#afe0837dfadb366ea8717fd97e04b3374" title="Sleep for a given period of time (in nanoseconds)." alt="" coords="201,5,340,32"/>
<area shape="rect" href="../../dc/da3/namespace_apps.html#aebbc688ed6a7097af1dd858ca0559d4b" title="Starts a task to display number of primes found by find_primes." alt="" coords="5,5,153,32"/>
</map>
</div>

</div>
</div>
<a id="a65c4921579a6bad97c037bc8db69fb26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65c4921579a6bad97c037bc8db69fb26">&#9670;&nbsp;</a></span>tasks_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/da2/structtask.html">task</a>* tasks_new </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/da2/structtask.html">task</a> *&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2">task_state</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new kernel task with a provided entry point, register storage struct, and task state struct. If the storage parameter is provided, the struct task struct provided will be written to. If NULL is passed as the storage parameter, a pointer to a allocated task will be returned. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>Task function entry point </td></tr>
    <tr><td class="paramname">storage</td><td>Task stack structure (if NULL, a pointer to the task is returned) </td></tr>
    <tr><td class="paramname">state</td><td>Task state structure </td></tr>
    <tr><td class="paramname">name</td><td>Task name (for debugging / printing) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>struct task* Pointer to the created kernel task </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00288">288</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;{</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/da2/structtask.html">task</a> *new_task = storage;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span> (storage == NULL) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">// allocate memory for our task structure</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        new_task = (<span class="keyword">struct </span><a class="code" href="../../db/da2/structtask.html">task</a>*)<a class="code" href="../../da/d45/heap_8hpp.html#a1c8580582aae58105f16108d4ec89e9a">malloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/da2/structtask.html">task</a>));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">// panic if the alloc fails (we have no fallback)</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span> (new_task == NULL) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <a class="code" href="../../d5/df3/sys_2panic_8cpp.html#a51ef3f9bd6cd14d744e31d392b445b33">panic</a>(<span class="stringliteral">&quot;Unable to allocate memory for new task struct.\n&quot;</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// allocate a page for this stack (we might change this later)</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// TODO: Should more than one page be allocated / freed?</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    uint8_t *stack = (uint8_t *)<a class="code" href="../../db/d2f/namespace_memory.html#ab679821559b51954042eb0715edd518f">Memory::newPage</a>(1);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (stack == NULL) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="../../d5/df3/sys_2panic_8cpp.html#a51ef3f9bd6cd14d744e31d392b445b33">panic</a>(<span class="stringliteral">&quot;Unable to allocate memory for new task stack.\n&quot;</span>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// remember, the stack grows up</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">void</span> *stack_pointer = stack + <a class="code" href="../../df/d48/_memory_8i386_8hpp.html#acd327ff534c65e3c5772a67d62d74ca0">ARCH_PAGE_SIZE</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// a null stack frame to make the panic screen happy</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    _stack_push_word(&amp;stack_pointer, 0);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// the last thing to happen is the task stopping function</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    _stack_push_word(&amp;stack_pointer, (<span class="keywordtype">size_t</span>)_task_stopping);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// next entry is the main function to call (the start of the task)</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    _stack_push_word(&amp;stack_pointer, (<span class="keywordtype">size_t</span>)entry);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// when this task is started, the CPU will pop off this value which will become the new EIP</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// we push this function to allow some setup code to be run from within the context of the new task</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    _stack_push_word(&amp;stack_pointer, (<span class="keywordtype">size_t</span>)_task_starting);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// our task switching code is going to pop four values off of the stack before returning</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    _stack_push_word(&amp;stack_pointer, 0);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    _stack_push_word(&amp;stack_pointer, 0);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    _stack_push_word(&amp;stack_pointer, 0);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    _stack_push_word(&amp;stack_pointer, 0);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    new_task-&gt;<a class="code" href="../../db/da2/structtask.html#ac52da3250648a75f90719ffd5d3f3535">stack_top</a> = (uintptr_t)stack_pointer;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    new_task-&gt;<a class="code" href="../../db/da2/structtask.html#a0b3d1736151c761dbbb49170ca13ad26">page_dir</a> = <a class="code" href="../../db/d2f/namespace_memory.html#a5c89c1a5d8f8de115f48adac4772f579">Memory::getPageDirPhysAddr</a>();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    new_task-&gt;<a class="code" href="../../db/da2/structtask.html#a3f2c7149983c28824baf1aebdfa7af98">next</a> = NULL;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    new_task-&gt;<a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a> = <a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    new_task-&gt;<a class="code" href="../../db/da2/structtask.html#a186feb125b22218d54494eef4d86a3b8">time_used</a> = 0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    new_task-&gt;<a class="code" href="../../db/da2/structtask.html#a83a6cca985649416b9cbb05a39b8d3f2">name</a> = <a class="code" href="../../db/da2/structtask.html#a83a6cca985649416b9cbb05a39b8d3f2">name</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    new_task-&gt;<a class="code" href="../../db/da2/structtask.html#a96ad7d7eeed64c2bbcc9e6f95c1d8893">alloc</a> = storage == NULL ? <a class="code" href="../../d2/dbd/tasks_8hpp.html#ac7aaa4c0605984fc6b92a727881b8707a1ca002103407b5faf981791ccde80582">ALLOC_DYNAMIC</a> : <a class="code" href="../../d2/dbd/tasks_8hpp.html#ac7aaa4c0605984fc6b92a727881b8707a8d8e53f91997090c4b163b7579f366dd">ALLOC_STATIC</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a> == <a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2aebcd951a6127c3c50a4f197b2b637793">TASK_READY</a>) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="../../d5/d9d/tasks_8cpp.html#a28a181f075e53e9f4a57998ca5a2b399">_tasks_enqueue_ready</a>(new_task);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a>(<span class="stringliteral">&quot;create task&quot;</span>, new_task);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> new_task;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_a65c4921579a6bad97c037bc8db69fb26_cgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_a65c4921579a6bad97c037bc8db69fb26_cgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_a65c4921579a6bad97c037bc8db69fb26_cgraph" id="d5/d9d/tasks_8cpp_a65c4921579a6bad97c037bc8db69fb26_cgraph">
<area shape="rect" title="Creates a new kernel task with a provided entry point, register storage struct, and task state struct..." alt="" coords="5,56,96,83"/>
<area shape="rect" href="../../da/d45/heap_8hpp.html#a1c8580582aae58105f16108d4ec89e9a" title=" " alt="" coords="181,5,248,32"/>
<area shape="rect" href="../../db/d2f/namespace_memory.html#ab679821559b51954042eb0715edd518f" title="Returns a new page in memory for use. If less than one page is requested, exactly one page will be al..." alt="" coords="144,56,285,83"/>
<area shape="rect" href="../../d5/df3/sys_2panic_8cpp.html#a51ef3f9bd6cd14d744e31d392b445b33" title="Halt the system and print the provided message on the panic screen." alt="" coords="186,107,243,133"/>
</map>
</div>

</div>
</div>
<a id="a5e9769e0e26d471f914a8e33bc6494f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9769e0e26d471f914a8e33bc6494f8">&#9670;&nbsp;</a></span>tasks_schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_schedule </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tell the kernel task scheduler to schedule all of the added tasks. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00405">405</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;{</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// we must lock on all scheduling operations</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    _aquire_scheduler_lock();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// run the scheduler</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    _schedule();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// this will run when we switch back to the calling task</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    _release_scheduler_lock();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2432c50b4d4264b5d5295bdb4f19e0d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2432c50b4d4264b5d5295bdb4f19e0d2">&#9670;&nbsp;</a></span>tasks_sync_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_sync_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dc4/structtask__sync.html">task_sync</a> *&#160;</td>
          <td class="paramname"><em>ts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00559">559</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;{</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    _aquire_scheduler_lock();</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a89cc556553145f650472b59f883e6ebd">dbg_name</a> != NULL) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="../../d7/d75/namespace_r_s232.html#a394b7ac1c601a47c2881a460eb41171a">RS232::printf</a>(<span class="stringliteral">&quot;blocking %s\n&quot;</span>, ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a89cc556553145f650472b59f883e6ebd">dbg_name</a>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// push the current task to the waiting queue</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    _enqueue_task(&amp;ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a13eecc2a66d864b9910659a0f4fbc575">waiting</a>, <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// now block until the mutex is freed</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#ae954d27107c4990313982108234cae5d">tasks_block_current</a>(<a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a108284117a3f463352658a08930a3888">TASK_BLOCKED</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    _release_scheduler_lock();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_a2432c50b4d4264b5d5295bdb4f19e0d2_icgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_a2432c50b4d4264b5d5295bdb4f19e0d2_icgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_a2432c50b4d4264b5d5295bdb4f19e0d2_icgraph" id="d5/d9d/tasks_8cpp_a2432c50b4d4264b5d5295bdb4f19e0d2_icgraph">
<area shape="rect" title=" " alt="" coords="335,31,471,57"/>
<area shape="rect" href="../../d4/de8/class_mutex.html#aa732ae651974555965dcaf9ad9e87882" title="Locks a provided mutex. This call will block if the mutex is already locked." alt="" coords="169,5,271,32"/>
<area shape="rect" href="../../d4/dbd/class_semaphore.html#ac3b3b6cd0044efda8fbd2dbd0fb6d995" title="Waiting on a semaphore decrements the count value. When a count value is 0, the semaphore is locked a..." alt="" coords="153,56,287,83"/>
<area shape="rect" href="../../d7/d75/namespace_r_s232.html#aa77ae4139fa5feba01809614f595edb6" title="Reads bytes from the serial buffer." alt="" coords="5,5,105,32"/>
</map>
</div>

</div>
</div>
<a id="a95269b08443b913d1ca443794e4aa3ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95269b08443b913d1ca443794e4aa3ad">&#9670;&nbsp;</a></span>tasks_sync_unblock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_sync_unblock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dc4/structtask__sync.html">task_sync</a> *&#160;</td>
          <td class="paramname"><em>ts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00574">574</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;{</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    _aquire_scheduler_lock();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a89cc556553145f650472b59f883e6ebd">dbg_name</a> != NULL) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="../../d7/d75/namespace_r_s232.html#a394b7ac1c601a47c2881a460eb41171a">RS232::printf</a>(<span class="stringliteral">&quot;unblocking %s\n&quot;</span>, ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a89cc556553145f650472b59f883e6ebd">dbg_name</a>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">// iterate all tasks that were blocked and unblock them</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/da2/structtask.html">task</a> *<a class="code" href="../../db/da2/structtask.html">task</a> = ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a13eecc2a66d864b9910659a0f4fbc575">waiting</a>.<a class="code" href="../../df/d8a/structtasklist.html#abd1a8445cd2c624fb49d3124f22094bf">head</a>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/da2/structtask.html">task</a> *<a class="code" href="../../db/da2/structtask.html#a3f2c7149983c28824baf1aebdfa7af98">next</a> = NULL;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/da2/structtask.html">task</a> == NULL) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment">// no other tasks were blocked</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">goto</span> exit;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="../../db/da2/structtask.html#a3f2c7149983c28824baf1aebdfa7af98">next</a> = <a class="code" href="../../db/da2/structtask.html">task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a3f2c7149983c28824baf1aebdfa7af98">next</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="../../d5/d9d/tasks_8cpp.html#a2c709360390e2764996020567dd70dfd">_wakeup</a>(<a class="code" href="../../db/da2/structtask.html">task</a>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <a class="code" href="../../db/da2/structtask.html">task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a3f2c7149983c28824baf1aebdfa7af98">next</a> = NULL;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="../../db/da2/structtask.html">task</a> = <a class="code" href="../../db/da2/structtask.html#a3f2c7149983c28824baf1aebdfa7af98">next</a>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    } <span class="keywordflow">while</span> (<a class="code" href="../../db/da2/structtask.html">task</a> != NULL);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a13eecc2a66d864b9910659a0f4fbc575">waiting</a>.<a class="code" href="../../df/d8a/structtasklist.html#abd1a8445cd2c624fb49d3124f22094bf">head</a> = NULL;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    ts-&gt;<a class="code" href="../../dd/dc4/structtask__sync.html#a13eecc2a66d864b9910659a0f4fbc575">waiting</a>.<a class="code" href="../../df/d8a/structtasklist.html#a42f2a01c81fb1c2a8fa2d6002b5cd819">tail</a> = NULL;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// we woke up some tasks</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    _schedule();</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;exit:</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    _release_scheduler_lock();</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_a95269b08443b913d1ca443794e4aa3ad_icgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_a95269b08443b913d1ca443794e4aa3ad_icgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_a95269b08443b913d1ca443794e4aa3ad_icgraph" id="d5/d9d/tasks_8cpp_a95269b08443b913d1ca443794e4aa3ad_icgraph">
<area shape="rect" title=" " alt="" coords="333,31,485,57"/>
<area shape="rect" href="../../d4/dbd/class_semaphore.html#a3035df6c720616bb1c194730d895c924" title="Increments the semaphore&#39;s counter. This is used to indicate that the thread or process is done utili..." alt="" coords="153,5,285,32"/>
<area shape="rect" href="../../d4/de8/class_mutex.html#a669f7a1dd7992948b397726e5d187a39" title="Unlocks a mutex for others to use." alt="" coords="161,56,277,83"/>
<area shape="rect" href="../../d7/d75/namespace_r_s232.html#aa77ae4139fa5feba01809614f595edb6" title="Reads bytes from the serial buffer." alt="" coords="5,56,105,83"/>
</map>
</div>

</div>
</div>
<a id="ac8fc9f801e5cc9d86d6801f003fd4a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8fc9f801e5cc9d86d6801f003fd4a24">&#9670;&nbsp;</a></span>tasks_unblock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_unblock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/da2/structtask.html">task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unblocks the current task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00430">430</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;{</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    _aquire_scheduler_lock();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="../../db/da2/structtask.html">task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">state</a> = <a class="code" href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2aebcd951a6127c3c50a4f197b2b637793">TASK_READY</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a>(<span class="stringliteral">&quot;unblock&quot;</span>, <a class="code" href="../../db/da2/structtask.html">task</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="../../d5/d9d/tasks_8cpp.html#a28a181f075e53e9f4a57998ca5a2b399">_tasks_enqueue_ready</a>(<a class="code" href="../../db/da2/structtask.html">task</a>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    _release_scheduler_lock();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a253cc97fa008fce21eeb67d012a9fced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a253cc97fa008fce21eeb67d012a9fced">&#9670;&nbsp;</a></span>tasks_update_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tasks_update_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00335">335</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    uint64_t current_time = _get_cpu_time_ns();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    uint64_t delta = current_time - _last_time;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a> == NULL) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        _idle_time += delta;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a>-&gt;<a class="code" href="../../db/da2/structtask.html#a186feb125b22218d54494eef4d86a3b8">time_used</a> += delta;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    _last_time = current_time;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/tasks_8cpp_a253cc97fa008fce21eeb67d012a9fced_icgraph.png" border="0" usemap="#d5/d9d/tasks_8cpp_a253cc97fa008fce21eeb67d012a9fced_icgraph" alt=""/></div>
<map name="d5/d9d/tasks_8cpp_a253cc97fa008fce21eeb67d012a9fced_icgraph" id="d5/d9d/tasks_8cpp_a253cc97fa008fce21eeb67d012a9fced_icgraph">
<area shape="rect" title=" " alt="" coords="207,5,353,32"/>
<area shape="rect" href="../../d2/dbd/tasks_8hpp.html#abb605ae845f610f55e83c3ce80750355" title="Returns the lifetime of the current task (in nanoseconds)." alt="" coords="5,5,159,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a9f6cf565fea5037efb7f971337abaf12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f6cf565fea5037efb7f971337abaf12">&#9670;&nbsp;</a></span>current_task</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/da2/structtask.html">task</a>* current_task = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00039">39</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>

</div>
</div>
<a id="abdf500ea78dbbde8ed74812647db6740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf500ea78dbbde8ed74812647db6740">&#9670;&nbsp;</a></span>tasks_ready</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d8a/structtasklist.html">tasklist</a> tasks_ready = { }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d9d/tasks_8cpp_source.html#l00043">43</a> of file <a class="el" href="../../d5/d9d/tasks_8cpp_source.html">tasks.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="atasks_8hpp_html_ac7aaa4c0605984fc6b92a727881b8707a8d8e53f91997090c4b163b7579f366dd"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#ac7aaa4c0605984fc6b92a727881b8707a8d8e53f91997090c4b163b7579f366dd">ALLOC_STATIC</a></div><div class="ttdeci">@ ALLOC_STATIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00030">tasks.hpp:30</a></div></div>
<div class="ttc" id="atasks_8cpp_html_a253cc97fa008fce21eeb67d012a9fced"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#a253cc97fa008fce21eeb67d012a9fced">tasks_update_time</a></div><div class="ttdeci">void tasks_update_time()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00335">tasks.cpp:335</a></div></div>
<div class="ttc" id="astructtask_html"><div class="ttname"><a href="../../db/da2/structtask.html">task</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00032">tasks.hpp:32</a></div></div>
<div class="ttc" id="astructtasklist_html"><div class="ttname"><a href="../../df/d8a/structtasklist.html">tasklist</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00048">tasks.hpp:48</a></div></div>
<div class="ttc" id="atasks_8hpp_html_a46c7ab5dd73831ee98458db0a68fc4a2aebcd951a6127c3c50a4f197b2b637793"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2aebcd951a6127c3c50a4f197b2b637793">TASK_READY</a></div><div class="ttdeci">@ TASK_READY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00022">tasks.hpp:22</a></div></div>
<div class="ttc" id="atasks_8hpp_html_a46c7ab5dd73831ee98458db0a68fc4a2ac261e4c62bea6a313e386d777ae7ecbb"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2ac261e4c62bea6a313e386d777ae7ecbb">TASK_SLEEPING</a></div><div class="ttdeci">@ TASK_SLEEPING</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00023">tasks.hpp:23</a></div></div>
<div class="ttc" id="atasks_8cpp_html_ac8fc9f801e5cc9d86d6801f003fd4a24"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#ac8fc9f801e5cc9d86d6801f003fd4a24">tasks_unblock</a></div><div class="ttdeci">void tasks_unblock(struct task *task)</div><div class="ttdoc">Unblocks the current task.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00430">tasks.cpp:430</a></div></div>
<div class="ttc" id="astructtask_html_a186feb125b22218d54494eef4d86a3b8"><div class="ttname"><a href="../../db/da2/structtask.html#a186feb125b22218d54494eef4d86a3b8">task::time_used</a></div><div class="ttdeci">uint64_t time_used</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00038">tasks.hpp:38</a></div></div>
<div class="ttc" id="atimer_8cpp_html_aa5729176ed3fb89f2e5c91b28361f643"><div class="ttname"><a href="../../dc/de5/timer_8cpp.html#aa5729176ed3fb89f2e5c91b28361f643">timer_register_callback</a></div><div class="ttdeci">void timer_register_callback(void(*func)())</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de5/timer_8cpp_source.html#l00061">timer.cpp:61</a></div></div>
<div class="ttc" id="astructtask_html_a96ad7d7eeed64c2bbcc9e6f95c1d8893"><div class="ttname"><a href="../../db/da2/structtask.html#a96ad7d7eeed64c2bbcc9e6f95c1d8893">task::alloc</a></div><div class="ttdeci">task_alloc alloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00041">tasks.hpp:41</a></div></div>
<div class="ttc" id="atasks_8hpp_html_ac7aaa4c0605984fc6b92a727881b8707a1ca002103407b5faf981791ccde80582"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#ac7aaa4c0605984fc6b92a727881b8707a1ca002103407b5faf981791ccde80582">ALLOC_DYNAMIC</a></div><div class="ttdeci">@ ALLOC_DYNAMIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00030">tasks.hpp:30</a></div></div>
<div class="ttc" id="atasks_8cpp_html_a525bc038ba8fbd7178e3b3d20f866af0"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#a525bc038ba8fbd7178e3b3d20f866af0">TASK_ACTION</a></div><div class="ttdeci">#define TASK_ACTION(action, task)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00123">tasks.cpp:123</a></div></div>
<div class="ttc" id="atasks_8cpp_html_a28a181f075e53e9f4a57998ca5a2b399"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#a28a181f075e53e9f4a57998ca5a2b399">_tasks_enqueue_ready</a></div><div class="ttdeci">void _tasks_enqueue_ready(struct task *task)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00278">tasks.cpp:278</a></div></div>
<div class="ttc" id="atasks_8hpp_html_ab3c4cf018b280f12e3726184a945728c"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#ab3c4cf018b280f12e3726184a945728c">TIME_SLICE_SIZE</a></div><div class="ttdeci">#define TIME_SLICE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00017">tasks.hpp:17</a></div></div>
<div class="ttc" id="astructtask__sync_html_a89cc556553145f650472b59f883e6ebd"><div class="ttname"><a href="../../dd/dc4/structtask__sync.html#a89cc556553145f650472b59f883e6ebd">task_sync::dbg_name</a></div><div class="ttdeci">const char * dbg_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00058">tasks.hpp:58</a></div></div>
<div class="ttc" id="atasks_8cpp_html_a65c4921579a6bad97c037bc8db69fb26"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#a65c4921579a6bad97c037bc8db69fb26">tasks_new</a></div><div class="ttdeci">struct task * tasks_new(void(*entry)(void), struct task *storage, task_state state, const char *name)</div><div class="ttdoc">Creates a new kernel task with a provided entry point, register storage struct, and task state struct...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00288">tasks.cpp:288</a></div></div>
<div class="ttc" id="asys_2panic_8cpp_html_a51ef3f9bd6cd14d744e31d392b445b33"><div class="ttname"><a href="../../d5/df3/sys_2panic_8cpp.html#a51ef3f9bd6cd14d744e31d392b445b33">panic</a></div><div class="ttdeci">NORET void panic(const char *msg)</div><div class="ttdoc">Halt the system and print the provided message on the panic screen.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df3/sys_2panic_8cpp_source.html#l00082">sys/panic.cpp:82</a></div></div>
<div class="ttc" id="atasks_8hpp_html_a46c7ab5dd73831ee98458db0a68fc4a2a9bd2895158d9e7c8cf80b57659fcba50"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a9bd2895158d9e7c8cf80b57659fcba50">TASK_RUNNING</a></div><div class="ttdeci">@ TASK_RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00021">tasks.hpp:21</a></div></div>
<div class="ttc" id="anamespace_memory_html_a5c89c1a5d8f8de115f48adac4772f579"><div class="ttname"><a href="../../db/d2f/namespace_memory.html#a5c89c1a5d8f8de115f48adac4772f579">Memory::getPageDirPhysAddr</a></div><div class="ttdeci">uintptr_t getPageDirPhysAddr()</div><div class="ttdoc">Gets the physical address of the current page directory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d5e/paging_8cpp_source.html#l00269">paging.cpp:269</a></div></div>
<div class="ttc" id="atasks_8cpp_html_abdf500ea78dbbde8ed74812647db6740"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#abdf500ea78dbbde8ed74812647db6740">tasks_ready</a></div><div class="ttdeci">struct tasklist tasks_ready</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00043">tasks.cpp:43</a></div></div>
<div class="ttc" id="atasks_8hpp_html_a46c7ab5dd73831ee98458db0a68fc4a2a52340c1844b9c87b6c965569f21d72f1"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a52340c1844b9c87b6c965569f21d72f1">TASK_STOPPED</a></div><div class="ttdeci">@ TASK_STOPPED</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00025">tasks.hpp:25</a></div></div>
<div class="ttc" id="astructtask_html_ac52da3250648a75f90719ffd5d3f3535"><div class="ttname"><a href="../../db/da2/structtask.html#ac52da3250648a75f90719ffd5d3f3535">task::stack_top</a></div><div class="ttdeci">uintptr_t stack_top</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00034">tasks.hpp:34</a></div></div>
<div class="ttc" id="astructtask__sync_html_a13eecc2a66d864b9910659a0f4fbc575"><div class="ttname"><a href="../../dd/dc4/structtask__sync.html#a13eecc2a66d864b9910659a0f4fbc575">task_sync::waiting</a></div><div class="ttdeci">struct tasklist waiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00059">tasks.hpp:59</a></div></div>
<div class="ttc" id="anamespace_memory_html_ab679821559b51954042eb0715edd518f"><div class="ttname"><a href="../../db/d2f/namespace_memory.html#ab679821559b51954042eb0715edd518f">Memory::newPage</a></div><div class="ttdeci">void * newPage(size_t size)</div><div class="ttdoc">Returns a new page in memory for use. If less than one page is requested, exactly one page will be al...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d5e/paging_8cpp_source.html#l00224">paging.cpp:224</a></div></div>
<div class="ttc" id="atasks_8hpp_html_a46c7ab5dd73831ee98458db0a68fc4a2a70c1246153ef112b1baa60e2f6e36cd3"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a70c1246153ef112b1baa60e2f6e36cd3">TASK_PAUSED</a></div><div class="ttdeci">@ TASK_PAUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00026">tasks.hpp:26</a></div></div>
<div class="ttc" id="astructtasklist_html_abd1a8445cd2c624fb49d3124f22094bf"><div class="ttname"><a href="../../df/d8a/structtasklist.html#abd1a8445cd2c624fb49d3124f22094bf">tasklist::head</a></div><div class="ttdeci">struct task * head</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00050">tasks.hpp:50</a></div></div>
<div class="ttc" id="astructtask_html_a665dc156ee4493d4541bc117bd657d67"><div class="ttname"><a href="../../db/da2/structtask.html#a665dc156ee4493d4541bc117bd657d67">task::state</a></div><div class="ttdeci">task_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00037">tasks.hpp:37</a></div></div>
<div class="ttc" id="astructtask_html_ac8757d0d71961fb132be5811ec283976"><div class="ttname"><a href="../../db/da2/structtask.html#ac8757d0d71961fb132be5811ec283976">task::wakeup_time</a></div><div class="ttdeci">uint64_t wakeup_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00039">tasks.hpp:39</a></div></div>
<div class="ttc" id="astructtask_html_a83a6cca985649416b9cbb05a39b8d3f2"><div class="ttname"><a href="../../db/da2/structtask.html#a83a6cca985649416b9cbb05a39b8d3f2">task::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00040">tasks.hpp:40</a></div></div>
<div class="ttc" id="astructtask_html_a0b3d1736151c761dbbb49170ca13ad26"><div class="ttname"><a href="../../db/da2/structtask.html#a0b3d1736151c761dbbb49170ca13ad26">task::page_dir</a></div><div class="ttdeci">uintptr_t page_dir</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00035">tasks.hpp:35</a></div></div>
<div class="ttc" id="aheap_8hpp_html_a1c8580582aae58105f16108d4ec89e9a"><div class="ttname"><a href="../../da/d45/heap_8hpp.html#a1c8580582aae58105f16108d4ec89e9a">malloc</a></div><div class="ttdeci">void * malloc(size_t)</div></div>
<div class="ttc" id="a_memory_8i386_8hpp_html_acd327ff534c65e3c5772a67d62d74ca0"><div class="ttname"><a href="../../df/d48/_memory_8i386_8hpp.html#acd327ff534c65e3c5772a67d62d74ca0">ARCH_PAGE_SIZE</a></div><div class="ttdeci">#define ARCH_PAGE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d48/_memory_8i386_8hpp_source.html#l00016">Memory.i386.hpp:16</a></div></div>
<div class="ttc" id="atasks_8cpp_html_a1280b6050df9305a3afc0b8f609e581c"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#a1280b6050df9305a3afc0b8f609e581c">tasks_nano_sleep_until</a></div><div class="ttdeci">void tasks_nano_sleep_until(uint64_t time)</div><div class="ttdoc">Sleeps until the provided absolute time (in nanoseconds).</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00493">tasks.cpp:493</a></div></div>
<div class="ttc" id="atasks_8cpp_html_a2c709360390e2764996020567dd70dfd"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#a2c709360390e2764996020567dd70dfd">_wakeup</a></div><div class="ttdeci">void _wakeup(struct task *task)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00439">tasks.cpp:439</a></div></div>
<div class="ttc" id="atasks_8cpp_html_a9f6cf565fea5037efb7f971337abaf12"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#a9f6cf565fea5037efb7f971337abaf12">current_task</a></div><div class="ttdeci">struct task * current_task</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00039">tasks.cpp:39</a></div></div>
<div class="ttc" id="astructtask_html_a3f2c7149983c28824baf1aebdfa7af98"><div class="ttname"><a href="../../db/da2/structtask.html#a3f2c7149983c28824baf1aebdfa7af98">task::next</a></div><div class="ttdeci">struct task * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00036">tasks.hpp:36</a></div></div>
<div class="ttc" id="atasks_8hpp_html_a46c7ab5dd73831ee98458db0a68fc4a2a108284117a3f463352658a08930a3888"><div class="ttname"><a href="../../d2/dbd/tasks_8hpp.html#a46c7ab5dd73831ee98458db0a68fc4a2a108284117a3f463352658a08930a3888">TASK_BLOCKED</a></div><div class="ttdeci">@ TASK_BLOCKED</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00024">tasks.hpp:24</a></div></div>
<div class="ttc" id="atasks_8cpp_html_ae954d27107c4990313982108234cae5d"><div class="ttname"><a href="../../d5/d9d/tasks_8cpp.html#ae954d27107c4990313982108234cae5d">tasks_block_current</a></div><div class="ttdeci">void tasks_block_current(task_state reason)</div><div class="ttdoc">Blocks the current task.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9d/tasks_8cpp_source.html#l00421">tasks.cpp:421</a></div></div>
<div class="ttc" id="anamespace_r_s232_html_a394b7ac1c601a47c2881a460eb41171a"><div class="ttname"><a href="../../d7/d75/namespace_r_s232.html#a394b7ac1c601a47c2881a460eb41171a">RS232::printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc7/rs232_8cpp_source.html#l00080">rs232.cpp:80</a></div></div>
<div class="ttc" id="astructtasklist_html_a42f2a01c81fb1c2a8fa2d6002b5cd819"><div class="ttname"><a href="../../df/d8a/structtasklist.html#a42f2a01c81fb1c2a8fa2d6002b5cd819">tasklist::tail</a></div><div class="ttdeci">struct task * tail</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/tasks_8hpp_source.html#l00051">tasks.hpp:51</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="../../dir_673419bcbe62e80b0522bf884daabf0e.html">sys</a></li><li class="navelem"><a class="el" href="../../d5/d9d/tasks_8cpp.html">tasks.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
